!function e(t,s,i){function n(o,a){if(!s[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=s[o]={exports:{}};t[o][0].call(d.exports,function(e){var s=t[o][1][e];return n(s?s:e)},d,d.exports,e,t,s,i)}return s[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,s){var i,n,r,o;o=e("jade/sequence"),n=e("components/macro-task"),r=e("components/macro-task-sub"),t.exports=i=function(){function e(e,t){this.packet=t,this.tasks={},this.doomedTasks={},this.scrubPacketData(),this.id=this.packetid,this.$node=$(o({sequenceName:this.packet.title,hoverToolTip:this.packet.description,summary:this.packet.description})),e.append(this.$node)}return e.prototype.update=function(e){return this.packet=e,this.scrubPacketData(),"complete"===this.getStatus()?(this["delete"](),!0):(this.markAllTasksForDeletion(),this.createAndUpdateTasks(this.packet),this.finishAndDeleteCompleteTasks(),this.setStatus(),!1)},e.prototype["delete"]=function(){return this.markAllTasksForDeletion(),this.finishAndDeleteCompleteTasks(),this.remove()},e.prototype.deleteImmediately=function(){return this.markAllTasksForDeletion(),this.finishAndDeleteCompleteTasks(),this.$node.remove()},e.prototype.markAllTasksForDeletion=function(){var e,t,s,i;this.doomedTasks={},e=this.tasks,t=[];for(i in e)s=e[i],t.push(this.doomedTasks[i]=s);return t},e.prototype.createAndUpdateTasks=function(e){var t,s,i,o,a,u;i=e.summary,o=[];for(u in i)a=i[u],null!=this.doomedTasks[u]&&delete this.doomedTasks[u],null==this.tasks[u]&&(t=u.split("."),t.length>1?(s=this.tasks[t[0]],this.tasks[u]=new r({name:u,macroId:e.id},s,t[1])):this.tasks[u]=new n($(".tasks",this.$node),{name:u,macroId:e.id})),o.push(this.tasks[u].update(a.message,a.estimate,a.error));return o},e.prototype.finishAndDeleteCompleteTasks=function(){var e,t,s,i;e=this.doomedTasks,t=[];for(i in e)s=e[i],this.tasks[i].finishAndDelete(),t.push(delete this.tasks[i]);return t},e.prototype.remove=function(){return this.$node.velocity({opacity:0},{duration:400,delay:1e3,complete:function(e){return function(){return e.$node.remove()}}(this)})},e.prototype.removeIfTasksComplete=function(){return 0===Object.keys(this.tasks).length&&"queued"!==this.getStatus()&&"running"!==this.getStatus()?this.$node.velocity({opacity:0},{delay:1e3,duration:400,complete:function(e){return function(){return e.$node.remove()}}(this)}):void 0},e.prototype.setStatus=function(){var e;return e=this.getStatus(),$(".state",this.$node).text(e),$(".state",this.$node).attr("class","state "+e)},e.prototype.getStatus=function(){switch(this.packet.state){case"aborted":return"aborted";case"complete":return"complete";case"incomplete":switch(this.packet.status){case"ready":return"queued";case"error":return"errored";case"malfunction":return"malfunctioned";case"malformed":return"malformed";default:return"running"}break;default:return"malformed"}},e.prototype.scrubPacketData=function(){return null==this.packet.state&&(this.packet.state="malformed"),null==this.packet.status&&(this.packet.status="malformed"),null==this.packet.description&&(this.packet.description="No Description Provided"),null==this.packet.title&&(this.packet.title="No Title Provided"),null==this.packet.errored&&(this.packet.errored=!1),null==this.packet.summary?this.packet.summary={}:void 0},e}()},{"components/macro-task":3,"components/macro-task-sub":2,"jade/sequence":8}],2:[function(e,t,s){var i,n,r=function(e,t){function s(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=e("components/macro-task"),t.exports=n=function(e){function t(e,s,i){this.parentTask=s,e.displayName="instance "+i,t.__super__.constructor.call(this,this.parentTask.$node,e),this.$node.addClass("instance")}return r(t,e),t.prototype.initShow=function(){return this.$node.css({opacity:0}),this.$node.velocity({opacity:1},{duration:600,easing:"easeInOutQuint"}),this.grow()},t.prototype.grow=function(e){return this.parentTask.grow(300),t.__super__.grow.call(this,e)},t}(i)},{"components/macro-task":3}],3:[function(e,t,s){var i,n,r;r=e("jade/task"),n=e("components/sequence-error"),t.exports=i=function(){function e(e,t){var s,i;this.$el=e,this.data=t,console.log(this.data),(s=this.data).displayName||(s.displayName=this.data.name),i="default"===this.data.displayName?"core":this.data.displayName,this.$node=$(r({name:i})),this.$el.append(this.$node),this.height=0,this.tries=1,"core"===i?(this.$node.prependTo(this.$el),this.$node.addClass("core")):this.$el.append(this.$node),this.initShow(),this.$progressBar=$(".progress",this.$node),this.perc=0,PubSub.subscribe("progress.bars.halt",function(e){return function(t,s){return e.isPartOfCohort(s)?e.addError():void 0}}(this)),PubSub.subscribe("progress.bars.resume",function(e){return function(t,s){return e.isPartOfCohort(s)?e.removeError():void 0}}(this))}return e.prototype.isPartOfCohort=function(e){return-1!==e.indexOf(this.data.name)&&-1!==e.indexOf(this.data.macroId)},e.prototype.move=function(){return this.paused?void 0:(this.perc+=Math.random()*this.blockSize,this.perc<100?(this.$progressBar.velocity("stop",!0),this.$progressBar.velocity({width:this.perc+"%"},{delay:300*Math.random(),duration:800*Math.random()+100,complete:function(e){return function(){return e.move()}}(this)})):(this.perc=0,this.setMessageHtml(this.currentMessage+" - progression "+ ++this.tries),this.stopProgressbar(),this.$progressBar.css({width:"0"}),this.startProgressbar()))},e.prototype.show=function(e){return null==e&&(e=0),this.longRunner?this.setMessageHtml(this.currentMessage+" - Typically takes up to 24 hrs"):(this.setMessageHtml(this.currentMessage),this.move())},e.prototype.stopProgressbar=function(){return this.paused=!0},e.prototype.startProgressbar=function(){return this.paused=!1,this.move()},e.prototype.currentMessage="",e.prototype.update=function(e,t,s){return this.currentMessage!==e&&(""!==this.currentMessage?this.finishCurrentMessage(e,t):this.initializeNewMessage(e,t)),null!=s&&null==this.error?(this.error=new n(this.$node,s,this.data.macroId+"."+this.data.name),PubSub.publish("progress.bars.halt",this.data.macroId+"."+this.data.name)):null==s&&null!=this.error?this.error.clearMe():void 0},e.prototype.initializeNewMessage=function(e,t){var s;return this.currentMessage=e,this.tries=1,this.$node.removeClass("complete"),this.setMessageHtml(this.currentMessage),this.$progressBar.css({opacity:1,width:0}),s=3*t,s*=1.5,6e3>s&&(s=6e3),s>=864e5&&(this.longRunner=!0),this.blockSize=11e4/s,this.show()},e.prototype.finishCurrentMessage=function(e,t){return this.error&&this.removeError(),this.stopProgressbar(),this.setMessageHtml(this.currentMessage+" - Complete!"),this.$node.addClass("complete"),this.$progressBar.velocity({width:"100%"},{duration:700,easing:"easeInOutQuint"}),this.$progressBar.velocity({opacity:0},{delay:500,duration:300,complete:function(s){return function(){return null==e?s.remove():s.initializeNewMessage(e,t)}}(this)})},e.prototype.finishAndDelete=function(){return this.$node.addClass("complete"),this.finishCurrentMessage()},e.prototype.remove=function(){return this.$node.velocity({opacity:0},{duration:400,complete:function(e){return function(){return null!=e.parentTask&&e.parentTask.shrink(300),e.$node.velocity({height:0,"margin-bottom":0},{duration:300,easing:"easeInOutQuint",complete:function(){return e.$node.remove()}})}}(this)})},e.prototype.setMessageHtml=function(e){return $(".message",this.$node).text(e)},e.prototype.initShow=function(){return this.$node.css({opacity:0,height:"0px"}),this.$node.velocity({opacity:1},{duration:600,easing:"easeInOutQuint"}),this.grow()},e.prototype.grow=function(e){return this.height+=36,this.resize(e)},e.prototype.shrink=function(e,t){return null==e&&(e=200),null==t&&(t=0),this.height-=36,this.resize(e,t)},e.prototype.addError=function(){return this.stopProgressbar(),this.height+=110,this.resize()},e.prototype.removeError=function(){return this.height-=110,this.resize(),this.startProgressbar(),this.move(),null!=this.error?(this.error.destroy(),this.error=null):void 0},e.prototype.resize=function(e,t){return null==e&&(e=600),null==t&&(t=0),this.$node.velocity({height:this.height},{duration:e,easing:"easeInOutQuint",delay:t})},e}()},{"components/sequence-error":4,"jade/task":9}],4:[function(e,t,s){var i,n;n=e("jade/sequence-error"),t.exports=i=function(){function e(e,t,s){this.data=t,this.id=s,this.isFullScreen=!1,this.$node=$(n(this.data)),e.append(this.$node),this.$node.css({opacity:0}),this.$node.velocity({opacity:1},{duration:0,delay:10}),castShadows(this.$node),$(".stack-trace-btn",this.$node).on("click",function(e){return function(){return e.toggleFullScreen()}}(this)),$(".retry-btn",this.$node).on("click",function(e){return function(){return e.clearMe()}}(this))}return e.prototype.toggleFullScreen=function(){return this.isFullScreen?this.minimize():this.goFullScreen(),this.isFullScreen=!this.isFullScreen},e.prototype.minimize=function(){return $(this.$node).velocity({opacity:0},{duration:200,complete:function(e){return function(){return $(e.$node).velocity({opacity:1},{duration:200}),e.$node.removeClass("full-screen")}}(this)})},e.prototype.goFullScreen=function(){return $(this.$node).velocity({opacity:0},{duration:200,complete:function(e){return function(){return $(e.$node).velocity({opacity:1},{duration:35}),e.$node.addClass("full-screen")}}(this)})},e.prototype.clearMe=function(){return PubSub.publish("progress.bars.resume",this.id),PubSub.publish("sequence.retry",this.data.id)},e.prototype.destroy=function(){return $(".retry-btn",this.$node).off(),$(".stack-trace-btn",this.$node).off(),this.$node.velocity({opacity:0},{duration:500,complete:function(e){return function(){return e.$node.remove()}}(this)})},e}()},{"jade/sequence-error":6}],5:[function(e,t,s){var i,n,r,o=function(e,t){return function(){return e.apply(t,arguments)}};r=e("jade/sequence-wrapper"),i=e("components/macro-sequence"),n=function(){function e(e,t){this.$el=e,this.unMinimize=o(this.unMinimize,this),this.minimize=o(this.minimize,this),window.sequence=this,this.sequences={},this.$node=$(r({})),this.$el.append(this.$node),this.sequencesHolder=$(".sequences",this.$node),this.$el.append(this.$node),$(".trans-close-btn",this.$node).click(this.minimize),PubSub.subscribe("sequence.retry",function(e,s){return t(s)})}return e.prototype.onStormpackUpdate=function(e){return this.createAndUpdatesequences(e),this.hideIfNosequences()},e.prototype.clearAllsequences=function(){var e,t,s;t=this.sequences;for(e in t)s=t[e],s.deleteImmediately();return this.sequences={},this.sequencesHolder.empty(),this.$el.css({display:"none"})},e.prototype.createAndUpdatesequences=function(e){var t,s,i,n,r,o;for(n=[],s=0,i=e.length;i>s;s++)o=e[s],r=this.getOrCreatesequence(o),null!==r?(t=r.update(o),t&&delete this.sequences[o.id],0!==Object.keys(this.sequences).length?n.push(this.show()):n.push(void 0)):n.push(void 0);return n},e.prototype.getOrCreatesequence=function(e){var t;return null!=this.sequences[e.id]?this.sequences[e.id]:"complete"===e.state?null:(t=new i(this.sequencesHolder,e),this.sequences[e.id]=t,t)},e.prototype.hideIfNosequences=function(){return 0===Object.keys(this.sequences).length?this.hide():void 0},e.prototype.hide=function(){return this.$el.velocity({opacity:0},{delay:1200,duration:250,complete:function(e){return function(){return e.$el.css({display:"none"})}}(this)})},e.prototype.show=function(){return this.$el.css({opacity:1,display:"inline-block"})},e.prototype.minimize=function(e){return this.isMinimized?void 0:(this.$node.click(this.unMinimize),this.$node.addClass("minimized"),e.stopPropagation(),this.isMinimized=!0)},e.prototype.unMinimize=function(){return this.isMinimized?(this.isMinimized=!1,this.$node.removeClass("minimized")):void 0},e}(),window.nanobox||(window.nanobox={}),nanobox.SequenceViewer=n},{"components/macro-sequence":1,"jade/sequence-wrapper":7}],6:[function(e,t,s){t.exports=function(e){var t,s=[],i=e||{};return function(e,i,n,r){s.push('<div class="sequence-error"><div class="info"><div class="error-code"><div class="txt">Error</div><div class="code">'+jade.escape(null==(t=e)?"":t)+'</div></div><div class="content summary"><div class="label">Summary:</div><div class="txt">'+jade.escape(null==(t=n)?"":t)+'</div></div><div class="content guide"><div class="label">Guide: </div><a'+jade.attr("href",""+i,!0,!1)+' target="_blank"> <div class="txt">Understanding and Resolving a '+jade.escape(null==(t=e)?"":t)+' Error</div><img data-src="external-link" class="shadow-icon"/></a></div><div class="retry-btn">Retry</div><div class="stack-trace-btn"> <img data-src="stack-trace" class="shadow-icon"/><div class="txt"></div></div></div><pre class="stack-trace">'+jade.escape(null==(t=r)?"":t)+"</pre></div>")}.call(this,"code"in i?i.code:"undefined"!=typeof code?code:void 0,"doc"in i?i.doc:"undefined"!=typeof doc?doc:void 0,"summary"in i?i.summary:"undefined"!=typeof summary?summary:void 0,"trace"in i?i.trace:"undefined"!=typeof trace?trace:void 0),s.join("")}},{}],7:[function(e,t,s){t.exports=function(e){var t=[];return t.push('<div class="sequence-wrapper fixed"><div class="sequences"></div><div class="trans-close-btn">x</div></div>'),t.join("")}},{}],8:[function(e,t,s){t.exports=function(e){var t,s=[],i=e||{};return function(e,i,n){s.push("<div"+jade.attr("title",""+e,!0,!1)+' class="sequence"><div class="title"> <div class="main">'+jade.escape(null==(t=i)?"":t)+'</div><div class="summary">'+jade.escape(null==(t=n)?"":t)+'</div><div class="state"> </div></div><div class="tasks"> </div></div>')}.call(this,"hoverToolTip"in i?i.hoverToolTip:"undefined"!=typeof hoverToolTip?hoverToolTip:void 0,"sequenceName"in i?i.sequenceName:"undefined"!=typeof sequenceName?sequenceName:void 0,"summary"in i?i.summary:"undefined"!=typeof summary?summary:void 0),s.join("")}},{}],9:[function(e,t,s){t.exports=function(e){var t,s=[],i=e||{};return function(e){s.push('<div class="task"><div class="name">'+jade.escape(null==(t=e)?"":t)+'</div><div class="message"> </div><div class="progress"></div></div>')}.call(this,"name"in i?i.name:"undefined"!=typeof name?name:void 0),s.join("")}},{}]},{},[5]);